<p-card>
    <div class="mt-4">
        <p-fieldset legend="Company Details" [toggleable]="true">
            <div class="grid">
                <div class="col">
                    <div class="field grid">
                        <label htmlFor="customerName" class="col-12 mb-2 md:col-3 md:mb-0 font-bold">Customer
                            Name</label>
                        <div class="col-12 md:col-9">
                            <input pInputText type="text" [(ngModel)]="customerDetails.jpname" />
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="field grid">
                        <label htmlFor="gst" class="col-12 mb-2 md:col-3 md:mb-0 font-bold">GST</label>
                        <div class="col-12 md:col-9">
                            <input pInputText type="text" [(ngModel)]="customerDetails.jppgst" />
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="field grid">
                        <label htmlFor="mobile" class="col-12 mb-2 md:col-3 md:mb-0 font-bold">Mobile</label>
                        <div class="col-12 md:col-9">
                            <input pInputText type="number" [(ngModel)]="customerDetails.jpmobno">
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="field grid">
                        <label htmlFor="balance" class="col-12 mb-2 md:col-3 md:mb-0 font-bold">Balance</label>
                        <div class="col-12 md:col-9">
                            <input pInputText type="number" [(ngModel)]="customerDetails.jpbaln">
                        </div>
                    </div>
                </div>
            </div>
            <div class="field grid">
                <label htmlFor="address" class="col-12 mb-2 md:col-1 md:mb-0 font-bold">Address</label>
                <div class="col-12 md:col-10">
                    <textarea rows="2" cols="120" pInputTextarea [autoResize]="true"
                        [(ngModel)]="customerDetails.jpadd"></textarea>
                </div>
            </div>
        </p-fieldset>
    </div>

    <div class="mt-4">
        <p-fieldset legend="Tax Invoice">
            <div class="flex justify-content-between">
                <div class="field grid">
                    <label htmlFor="customerName" class="col-12 mb-2 md:col-5 md:mb-0 font-bold">Invoice
                        Number</label>
                    <div class="col-12 md:col-7">
                        <input pInputText type="text" />
                    </div>
                </div>
                <div class="field grid">
                    <label htmlFor="customerName" class="col-12 mb-2 md:col-5 md:mb-0 font-bold">Invoice
                        Date</label>
                    <div class="col-12 md:col-7">
                        <input pInputText type="text" />
                    </div>
                </div>
            </div>
            <p-table [value]="selectedProducts" dataKey="pnpdcd" editMode="row" [tableStyle]="{ 'min-width': '50rem' }"
                [rows]="10" [showCurrentPageReport]="false" [rowsPerPageOptions]="[10, 25, 50]" [paginator]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width:10%"></th>
                        <th style="width:10%">Challan</th>
                        <th style="width:25%">Product</th>
                        <th style="width:15%">HSNC</th>
                        <th style="width:10%">Total Qty</th>
                        <th style="width:10%">Unit Qty</th>
                        <th style="width:10%">Unit</th>
                        <th style="width:10%">Unit Price</th>
                        <th style="width:10%">Net Amount</th>
                        <th style="width:10%">CGST (%)</th>
                        <th style="width:10%">CGST</th>
                        <th style="width:10%">SGST (%)</th>
                        <th style="width:10%">SGST</th>
                        <th style="width:10%">Total Amount</th>
                        <th style="width:10%"></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage" let-columns>
                    <tr>
                        <td [attr.colspan]="15" class="text-center">
                            No records found
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-cproduct let-editing="editing" let-index="rowIndex">
                    <tr [pEditableRow]="cproduct" [pReorderableRow]="index">
                        <td><span class="pi pi-bars" pReorderableRowHandle></span></td>
                        <td [pEditableColumn]="cproduct.pnchallan" pEditableColumnField="pnchallan">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="cproduct.pnchallan">
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pnchallan}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="cproduct.pnscnm" pEditableColumnField="pnscnm">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="cproduct.pnscnm">
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pnscnm}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="cproduct.pnhsnc" pEditableColumnField="pnhsnc">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="cproduct.pnhsnc">
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pnhsnc}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="cproduct.pntqty" pEditableColumnField="pntqty">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="number" [(ngModel)]="cproduct.pntqty"
                                        (ngModelChange)="onChange($event, cproduct, 'pnprice')">

                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pntqty}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="cproduct.pnuqty" pEditableColumnField="pnuqty">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="number" [(ngModel)]="cproduct.pnuqty">
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pnuqty}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="cproduct.pnunit" pEditableColumnField="pnunit">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="cproduct.pnunit">
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pnunit}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td class="text-right" [pEditableColumn]="cproduct.pnprice" pEditableColumnField="pnprice">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="number" [(ngModel)]="cproduct.pnprice"
                                        (ngModelChange)="onChange($event, cproduct, 'pnprice')">

                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pnprice}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td class="text-right" [pEditableColumn]="cproduct.pnnamt" pEditableColumnField="pnnamt">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="number" [(ngModel)]="cproduct.pnnamt"
                                        (ngModelChange)="onChange($event, cproduct, 'namt')">

                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pnnamt}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td class="text-right" [pEditableColumn]="cproduct.pncgst" pEditableColumnField="pncgst">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="number" [(ngModel)]="cproduct.pncgst"
                                        (ngModelChange)="onChange($event, cproduct, 'cgst')">

                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pncgst}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td class="text-right">{{cproduct.pncgsta}}</td>
                        <td class="text-right" [pEditableColumn]="cproduct.pnsgst" pEditableColumnField="pnsgst">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="number" [(ngModel)]="cproduct.pnsgst"
                                        (ngModelChange)="onChange($event, cproduct, 'sgst')">

                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pnsgst}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td class="text-right">
                            {{cproduct.pnsgsta}}
                        </td>
                        <td class="text-right" [pEditableColumn]="cproduct.pntamt" pEditableColumnField="pntamt">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="number" [(ngModel)]="cproduct.pntamt"
                                        (ngModelChange)="onChange($event, cproduct, 'pntamt')">

                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{cproduct.pntamt}}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td class="text-left">
                            <i class="pi pi-times" pTooltip="Delete" tooltipPosition="bottom"></i>
                        </td>
                    </tr>
                </ng-template>
            </p-table>

            <!--Final Total & GST Summary-->
            <p-card header="Bill Summary">
                <div class="flex justify-content-between">
                    <div>
                        <table class="table">
                            <thead>
                                <th class="text-center">GST Type</th>
                                <th class="text-center">Net Amount</th>
                                <th class="text-center">Total CGST</th>
                                <th class="text-center">Total SGST</th>
                                <th class="text-center">Total Amount</th>
                            </thead>
                            <tbody>
                                <tr *ngFor="let gst of gstSummary| keyvalue">
                                    <td>{{gst.value.gngstp}}</td>
                                    <td class="text-right">{{gst.value.gnnamt | number : '1.2-2'}}</td>
                                    <td class="text-right">{{gst.value.gntcgst | number : '1.2-2'}}</td>
                                    <td class="text-right">{{gst.value.gntcgst | number : '1.2-2'}}</td>
                                    <td class="text-right">{{gst.value.gntamt | number : '1.2-2'}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div style="width: 200px;" class="mr-4">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>Net Amount</td>
                                    <td class="text-right">{{billSummary.bsnamt | number : '1.2-2'}}</td>
                                </tr>
                                <tr>
                                    <td>Total CGST</td>
                                    <td class="text-right">{{billSummary.bstcgst | number : '1.2-2'}}</td>
                                </tr>
                                <tr>
                                    <td>Total SGST</td>
                                    <td class="text-right">{{billSummary.bstsgst | number : '1.2-2'}}</td>
                                </tr>
                                <tr>
                                    <td>Total Amount</td>
                                    <td class="text-right">{{billSummary.bstamt | number : '1.2-2'}}</td>
                                </tr>
                                <tr>
                                    <td>Rounded Off</td>
                                    <td class="text-right">{{billSummary.bsroff | number : '1.2-2'}}</td>
                                </tr>
                                <tr>
                                    <td>Final Amount</td>
                                    <td class="text-right">{{billSummary.bsfamt | number : '1.2-2'}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </p-card>
            <div class="flex justify-content-start mt-4">
                <p-button label="Generate Bill"></p-button>
            </div>
        </p-fieldset>
    </div>
</p-card>