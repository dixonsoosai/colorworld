<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "ball-beat" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>
<p-toast></p-toast>
<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog> 

<p-card header="Formula">
	<div class="scroll-to-top">
		<p-button styleClass="p-button-outlined" icon="pi pi-arrow-circle-up"
			data-toggle="button" (click)="scrollToTop()"></p-button>
	</div>
	<div class="flex justify-content-between">
		<div class="field grid">
			<label htmlFor="name3" class="col-12 mb-2 md:col-2 md:mb-0">Search</label>
			<div class="col-12 md:col-10">
				<span class="p-input-icon-left">
					<i class="pi pi-search"></i>
					<input type="text" pInputText id="searchSuggestion" (keyup)="filter()"/>
				</span>
			</div>
		</div>
	</div>

    <div class="flex flex-wrap gap-4" id="productView">
        <div *ngFor="let formula of formulaList" style="width:32%;height:100%" class="my-2">
			<p-card>
				<h4>{{formula.brand}}</h4>
				<p class="card-text">{{formula.model}}</p>
				<div class="flex row justify-content-between">
					<span>Shade</span>
					<b>{{formula.shade}}</b>
				</div>
				<div class="flex row justify-content-between">
					<span>Variant</span>
					<b>{{formula.variant}}</b>
				</div>
				<div class="flex row justify-content-between">
					<span>Code</span>
					<b>{{formula.code}}</b>
				</div>
				
				<div class="mt-4 flex justify-content-end gap-3">
					<p-button label="View" styleClass="p-button-outlined" (click) ="view(formula)"></p-button>
					<p-button label="Delete" styleClass="p-button-outlined" (click)="delete(formula)"></p-button>
				</div>
            </p-card>
        </div>
    </div>
</p-card>

<p-dialog header="Formula" [(visible)]="formulaVisible" [style]="{width: '50vw'}">
	<div class="flex justify-content-center tile">
		<div style="width: 300px;">
			<div class="flex row justify-content-between">
				<span>Brand</span>
				<b>{{codeHeader.brand}}</b>
			</div>
			<div class="flex row justify-content-between">
				<span>Model</span>
				<b>{{codeHeader.model}}</b>
			</div>
			<div class="flex row justify-content-between">
				<span>Shade</span>
				<b>{{codeHeader.shade}}</b>
			</div>
			<div class="flex row justify-content-between">
				<span>Variant</span>
				<b>{{codeHeader.variant}}</b>
			</div>
			<div class="flex row justify-content-between">
				<span>Code</span>
				<b>{{codeHeader.code}}</b>
			</div>
		</div>
		
	</div>
	<div class="mt-4 text-center">
		<label  class="mr-2"><b>Enter quantity in ml: </b></label>
		<p-inputNumber inputId="withoutgrouping" [useGrouping]="false" [(ngModel)]="qty" (onInput)="change()"
		styleClass="input-styling"></p-inputNumber>
	</div>
	<div class="flex row justify-content-center gap-4 mt-4">
		<p-table [value]="codeBody">
			<ng-template pTemplate="header">
				<tr>
					<th>Ingredients</th>
					<th>Weight</th>
					<th>Price</th>
				</tr>
			</ng-template>
			<ng-template pTemplate="body" let-formula>
				<tr>
					<td>{{formula.ingredients}}</td>
					<td>{{formula.weight}}</td>
					<td>{{formula.price}}</td>
				</tr>
			</ng-template>
		</p-table>

		<p-table [value]="codeBodyml">
			<ng-template pTemplate="header">
				<tr>
					<th>Ingredients</th>
					<th>Weight</th>
					<th>Price</th>
				</tr>
			</ng-template>
			<ng-template pTemplate="body" let-formula>
				<tr>
					<td>{{formula.ingredients}}</td>
					<td>{{formula.weight}}</td>
					<td>{{formula.price}}</td>
				</tr>
			</ng-template>
		</p-table>
		
	</div>

</p-dialog>